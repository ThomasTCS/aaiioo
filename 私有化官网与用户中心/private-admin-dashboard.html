<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIOChat - 私有化客户后台</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .sidebar {
      width: 280px;
      min-height: calc(100vh - 64px);
      transition: all 0.3s ease;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 30;
      padding-top: 80px;
    }
    
    .sidebar.collapsed {
      margin-left: -280px;
    }
    
    .menu-item {
      transition: all 0.2s ease;
    }
    
    .menu-item:hover {
      background-color: #f3f4f6;
      transform: translateX(4px);
    }
    
    .menu-item.active {
      background-color: #eff6ff;
      color: #3b82f6;
      border-right: 3px solid #3b82f6;
    }
    
    .submenu-item {
      transition: all 0.2s ease;
      position: relative;
    }
    
    .submenu-item:hover {
      background-color: #f9fafb;
      color: #3b82f6;
    }
    
    .submenu-item.active {
      background-color: #eff6ff;
      color: #3b82f6;
    }
    
    .submenu-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 20px;
      background-color: #3b82f6;
      border-radius: 0 2px 2px 0;
    }
    
    .content-area {
      min-height: calc(100vh - 64px);
      transition: margin-left 0.3s ease;
      margin-left: 280px;
    }
    
    .content-area.expanded {
      margin-left: 0;
    }
    
    .fade-in {
      animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .header-shadow {
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    }
    
    /* 状态按钮样式 */
    .status-btn {
      background-color: white;
      border-color: #d1d5db;
      color: #6b7280;
    }
    
    .status-btn:hover {
      background-color: #f9fafb;
      border-color: #3b82f6;
      color: #3b82f6;
    }
    
    .status-btn.active {
      background-color: #3b82f6;
      border-color: #3b82f6;
      color: white;
    }
    
    /* 移动端适配 */
    @media (max-width: 1024px) {
      .sidebar {
        margin-left: -280px;
      }
      
      .sidebar.collapsed {
        margin-left: 0;
      }
      
      .content-area {
        margin-left: 0;
      }
      
      .content-area.expanded {
        margin-left: 280px;
      }
      
      .status-btn {
        display: none;
      }
    }
    
    @media (max-width: 640px) {
      .status-btn {
        display: none;
      }
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- 顶部导航栏 -->
  <header class="bg-white header-shadow sticky top-0 z-50">
    <div class="flex justify-between items-center px-6 py-4">
      <!-- 左侧Logo和菜单按钮 -->
      <div class="flex items-center space-x-4">
        <button id="sidebarToggle" class="p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
        
        <!-- 企业Logo显示区域 -->
        <div id="headerLogo" class="hidden flex items-center">
          <img id="headerLogoImage" src="" alt="企业Logo" class="h-8 w-8 object-contain rounded">
        </div>
      </div>
      
      <!-- 中间状态筛选 -->
      <div class="flex items-center space-x-2">
        <button 
          id="statusUnauthorized"
          class="status-btn active px-3 py-1 text-sm rounded-full border transition-colors"
          data-status="unauthorized"
        >
          未授权
        </button>
        <button 
          id="statusTrialUnexpired"
          class="status-btn px-3 py-1 text-sm rounded-full border transition-colors"
          data-status="trial-unexpired"
        >
          试用版-未过期
        </button>
        <button 
          id="statusTrialExpiring"
          class="status-btn px-3 py-1 text-sm rounded-full border transition-colors"
          data-status="trial-expiring"
        >
          试用版-即将过期
        </button>
        <button 
          id="statusTrialExpired"
          class="status-btn px-3 py-1 text-sm rounded-full border transition-colors"
          data-status="trial-expired"
        >
          试用版-已过期
        </button>
        <button 
          id="statusOfficial"
          class="status-btn px-3 py-1 text-sm rounded-full border transition-colors"
          data-status="official"
        >
          正式版
        </button>
      </div>
      
      <!-- 右侧用户信息 -->
      <div class="flex items-center">
        <div class="relative">
          <div class="flex items-center text-gray-700 cursor-pointer rounded-full hover:bg-gray-100 px-3 py-2 transition-colors duration-300" id="userMenuButton">
            <div class="user-avatar mr-3">
              <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
              </div>
            </div>
            <span id="userAccount" class="font-medium text-sm">admin</span>
            <svg class="h-4 w-4 ml-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          
          <!-- 用户下拉菜单 -->
          <div id="userDropdownMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
              个人设置
            </a>
            <div class="border-t border-gray-100"></div>
            <a href="private-admin-login.html" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors" id="logoutBtn">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
              退出登录
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="flex">
    <!-- 左侧菜单栏 -->
    <aside id="sidebar" class="sidebar bg-white shadow-sm">
      <nav class="pt-6 pb-4">
        <!-- 企业设置菜单 -->
        <div class="px-3 mb-2">
          <div class="menu-item px-3 py-2 rounded-md cursor-pointer flex items-center justify-between" id="enterpriseMenu">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5m6 0v-4a1 1 0 00-1-1h-2a1 1 0 00-1 1v4"></path>
              </svg>
              <span class="text-sm font-medium text-gray-700">企业设置</span>
            </div>
            <svg id="enterpriseArrow" class="w-4 h-4 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </div>
          
          <!-- 二级菜单 -->
          <div id="enterpriseSubmenu" class="ml-8 mt-1 space-y-1">
            <div class="submenu-item active px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="company-info">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5m6 0v-4a1 1 0 00-1-1h-2a1 1 0 00-1 1v4"></path>
              </svg>
              企业信息
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="chat-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
              </svg>
              聊天管理
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="email-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              邮箱管理
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="server-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2H5z"></path>
              </svg>
              服务器管理
            </div>
          </div>
        </div>
        
        <!-- License 费用菜单 -->
        <div class="px-3 mb-2">
          <div class="menu-item px-3 py-2 rounded-md cursor-pointer flex items-center" id="licensePricingMenu" data-page="license-pricing">
            <svg class="w-5 h-5 mr-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="text-sm font-medium text-gray-700">License 费用</span>
          </div>
        </div>
        
        <!-- AI 知识库菜单 -->
        <div class="px-3 mb-2">
          <div class="menu-item px-3 py-2 rounded-md cursor-pointer flex items-center justify-between" id="aiKnowledgeMenu">
            <div class="flex items-center">
              <svg class="w-5 h-5 mr-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
              </svg>
              <span class="text-sm font-medium text-gray-700">AI 知识库</span>
            </div>
            <svg id="aiKnowledgeArrow" class="w-4 h-4 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </div>
          
          <!-- 二级菜单 -->
          <div id="aiKnowledgeSubmenu" class="ml-8 mt-1 space-y-1 hidden">
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="knowledge-base-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
              </svg>
              知识库管理
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="document-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              文档管理
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="knowledge-point-management">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              知识点管理
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="training-test">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              训练测试
            </div>
            <div class="submenu-item px-3 py-2 text-sm text-gray-600 cursor-pointer rounded-md" data-page="data-statistics">
              <svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z"></path>
              </svg>
              数据统计
            </div>
          </div>
        </div>
      </nav>
    </aside>

    <!-- 主要内容区域 -->
    <main class="flex-1 content-area">
      <div class="p-6">
        <!-- 企业信息页面 -->
        <div id="companyInfoPage" class="page-content fade-in">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">企业信息</h1>
            <p class="text-gray-600">管理您的企业基本信息和配置</p>
          </div>
          
          <!-- License 申请提示 -->
          <div id="licenseNotice" class="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex items-start">
              <svg class="w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div>
                <h4 class="text-sm font-medium text-blue-800 mb-1">License 文件申请提醒</h4>
                <p class="text-sm text-blue-700">如果您还没有 License 文件，请前往私有化服务-用户中心进行申请</p>
              </div>
            </div>
          </div>
          
          <div class="space-y-6">
            <!-- 服务器机器码和License授权 -->
            <div class="bg-white rounded-lg shadow p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-6">License 授权</h3>
              
              <!-- 服务器机器码区域 -->
              <div class="mb-6">
                <div class="flex items-center space-x-4">
                  <label class="text-sm font-medium text-gray-700 flex-shrink-0">服务器机器码</label>
                  <div class="flex-1 bg-gray-50 rounded-lg px-4 py-2">
                                      <code id="machineCode" class="text-sm text-gray-800 font-mono break-all">
                    <!-- Machine code will be populated by JavaScript -->
                  </code>
                  </div>
                  <button 
                    id="copyMachineCodeBtn"
                    class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex-shrink-0"
                  >
                    复制
                  </button>
                </div>
                <p class="text-xs text-gray-500 mt-2">请复制此机器码用于申请 License 文件</p>
              </div>
              
                            <!-- License文件上传区域 -->
              <div>
                <!-- 上传区域和状态显示 -->
                <div class="flex items-center space-x-4">
                  <label class="text-sm font-medium text-gray-700 flex-shrink-0">License 文件</label>
                  <input
                    type="file"
                    id="licenseFileInput"
                    accept=".lic,.license,.txt"
                    class="hidden"
                  >
                  <button
                    type="button"
                    id="licenseUploadBtn"
                    class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex-shrink-0"
                  >
                    上传 License 文件
                  </button>
                  
                  <!-- License 激活状态显示 -->
                  <div id="licenseActiveStatus" class="hidden flex items-center space-x-3 flex-1">
                    <div class="flex items-center bg-green-50 rounded-lg px-3 py-2 border border-green-200">
                      <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <span class="text-sm font-medium text-green-800">已激活</span>
                      <span class="text-xs text-gray-600 ml-2">|</span>
                      <span id="licenseFileNameDisplay" class="text-xs text-gray-600 ml-2"></span>
                    </div>
                    <button
                      id="licenseReuploadBtn"
                      class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors flex-shrink-0"
                    >
                      重新上传
                    </button>
                  </div>
                </div>
                
                <p class="text-xs text-blue-600 mt-2">
                  <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  请上传在"私有化服务-用户中心"页面下载的文件
                </p>
              </div>
             </div>
             
             <!-- License激活后的企业配置区域 -->
             <div id="companyConfigSection" class="hidden space-y-6">
               <!-- 企业信息和Logo配置 -->
               <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                 <!-- 企业信息配置 -->
                 <div class="lg:col-span-2 bg-white rounded-lg shadow p-6">
                   <h3 class="text-lg font-semibold text-gray-900 mb-6">企业信息</h3>
                   
                   <form id="companyInfoForm" class="space-y-6">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                       <div>
                         <label for="companyName" class="block text-sm font-medium text-gray-700 mb-2">
                           企业名称 <span class="text-red-500">*</span>
                         </label>
                         <input
                           type="text"
                           id="companyName"
                           name="companyName"
                           required
                           value="AIOChat科技有限公司"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                       
                       <div>
                         <label for="companyEmail" class="block text-sm font-medium text-gray-700 mb-2">
                           企业邮箱 <span class="text-red-500">*</span>
                         </label>
                         <input
                           type="email"
                           id="companyEmail"
                           name="companyEmail"
                           required
                           value="admin@aiochat.com"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                       
                       <div>
                         <label for="contactName" class="block text-sm font-medium text-gray-700 mb-2">
                           联系人名称
                         </label>
                         <input
                           type="text"
                           id="contactName"
                           name="contactName"
                           placeholder="请输入联系人姓名"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                       
                       <div>
                         <label for="contactPhone" class="block text-sm font-medium text-gray-700 mb-2">
                           联系人电话
                         </label>
                         <input
                           type="tel"
                           id="contactPhone"
                           name="contactPhone"
                           placeholder="请输入联系电话"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                       
                       <div>
                         <label for="telegram" class="block text-sm font-medium text-gray-700 mb-2">
                           Telegram
                         </label>
                         <input
                           type="text"
                           id="telegram"
                           name="telegram"
                           placeholder="@username 或 链接"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                       
                       <div>
                         <label for="whatsapp" class="block text-sm font-medium text-gray-700 mb-2">
                           WhatsApp
                         </label>
                         <input
                           type="text"
                           id="whatsapp"
                           name="whatsapp"
                           placeholder="电话号码或链接"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                         >
                       </div>
                     </div>
                     
                     <div class="flex justify-end space-x-4">
                       <button
                         type="button"
                         id="companyInfoCancelBtn"
                         class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"
                       >
                         取消
                       </button>
                       <button
                         type="submit"
                         class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                       >
                         保存
                       </button>
                     </div>
                   </form>
                 </div>
                 
                 <!-- 企业Logo配置 -->
                 <div class="lg:col-span-1 bg-white rounded-lg shadow p-6">
                   <h3 class="text-lg font-semibold text-gray-900 mb-6">企业Logo</h3>
                   
                   <div class="space-y-6">
                     <!-- Logo预览区域 -->
                     <div class="flex justify-center">
                       <div id="logoPreview" class="w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50">
                         <div class="text-center">
                           <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                           </svg>
                           <p class="text-xs text-gray-500">Logo预览</p>
                         </div>
                       </div>
                     </div>
                     
                     <!-- Logo上传控制 -->
                     <div class="text-center space-y-4">
                       <div>
                         <input
                           type="file"
                           id="logoFileInput"
                           accept="image/*"
                           class="hidden"
                         >
                         <button
                           type="button"
                           id="logoUploadBtn"
                           class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                         >
                           上传Logo
                         </button>
                         <button
                           type="button"
                           id="logoRemoveBtn"
                           class="hidden w-full mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors"
                         >
                           移除Logo
                         </button>
                       </div>
                       
                       <div class="text-xs text-gray-600 text-left">
                         <p>• 建议尺寸：200x200像素</p>
                         <p>• 支持格式：PNG、JPG、JPEG</p>
                         <p>• 文件大小：不超过2MB</p>
                         <p>• Logo将显示在登录后的左上角</p>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>
               
               <!-- 授权信息显示 -->
               <div class="bg-white rounded-lg shadow p-6">
                 <h3 class="text-lg font-semibold text-gray-900 mb-6">授权信息</h3>
                 
                 <div class="space-y-6">
                   <!-- 企业标识码和到期时间 -->
                   <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <!-- 企业标识码 -->
                     <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                       <div class="flex items-center space-x-3">
                         <span class="text-sm font-medium text-gray-700">企业标识码</span>
                         <span class="text-lg font-mono text-gray-900">KJN23</span>
                       </div>
                     </div>
                     
                     <!-- 到期时间 -->
                     <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                       <div class="flex items-center space-x-3">
                         <span class="text-sm font-medium text-gray-700">到期时间</span>
                         <span class="text-lg text-gray-900">2025-06-30</span>
                       </div>
                     </div>
                   </div>
                   
                   <!-- 当前权益 -->
                   <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                     <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-3 sm:space-y-0">
                       <div class="flex items-center space-x-2">
                         <span class="text-sm font-medium text-blue-800">当前权益</span>
                         <span id="expiredNotice" class="hidden px-3 py-1 bg-red-600 text-white text-sm font-bold rounded-full shadow-lg animate-pulse border-2 border-red-400">已过期</span>
                         <span id="expiringNotice" class="hidden px-3 py-1 bg-orange-600 text-white text-sm font-bold rounded-full shadow-lg animate-pulse border-2 border-orange-400" style="background-color: #ea580c !important;">即将过期</span>
                       </div>
                       
                       <div class="flex items-center space-x-3">
                         <!-- 版本标识容器 - 在非正式版时显示在这里 -->
                         <div id="versionBadgeContainer" class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3">
                           <span id="currentVersionBadge" class="px-3 py-1 bg-blue-600 text-white text-sm rounded-full self-start">011</span>
                         </div>
                         
                         <!-- 功能按钮 - 仅在正式版时显示 -->
                         <div id="officialVersionButtons" class="hidden flex space-x-2">
                           <button
                             id="expandRightsBtn"
                             class="flex items-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white text-sm rounded-lg hover:from-purple-700 hover:to-purple-800 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-200 shadow-sm hover:shadow-md"
                           >
                             <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                             </svg>
                             扩展权益
                           </button>
                           
                           <button
                             id="renewLicenseServiceBtn"
                             class="flex items-center px-3 py-1.5 bg-gradient-to-r from-green-600 to-green-700 text-white text-sm rounded-lg hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all duration-200 shadow-sm hover:shadow-md"
                           >
                             <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                             </svg>
                             申请续期
                           </button>
                         </div>
                         
                         <!-- 购买License授权按钮 - 仅在试用版-已过期时显示 -->
                         <div id="purchaseLicenseButton" class="hidden">
                           <button
                             id="purchaseLicenseBtn"
                             class="flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-sm font-medium rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
                           >
                             <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 10-4 0v4.01"></path>
                             </svg>
                             购买License授权
                           </button>
                         </div>
                       </div>
                     </div>
                     
                     <!-- 权益数据网格 - 默认3列，正式版时变为4列 -->
                     <div id="benefitsGrid" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                       <!-- 版本标识块 - 仅在正式版时显示在这里 -->
                       <div id="versionBlock" class="hidden text-center p-3 bg-gradient-to-br from-blue-500 to-green-500 rounded-lg flex items-center justify-center">
                         <div class="text-2xl font-bold text-white" id="versionDisplay">正式版</div>
                       </div>
                       
                       <div class="text-center p-3 bg-white rounded-lg">
                         <div id="memberCount" class="text-2xl font-bold text-blue-600">5</div>
                         <div class="text-sm text-gray-600">成员数</div>
                       </div>
                       <div class="text-center p-3 bg-white rounded-lg">
                         <div id="socialAccountCount" class="text-2xl font-bold text-blue-600">5</div>
                         <div class="text-sm text-gray-600">社媒账号数</div>
                       </div>
                       <div class="text-center p-3 bg-white rounded-lg">
                         <div id="translateCharCount" class="text-2xl font-bold text-blue-600">10,000</div>
                         <div class="text-sm text-gray-600">翻译字符数</div>
                       </div>
                     </div>
                   </div>
                 </div>
               </div>
               

             </div>
           </div>
        </div>
        
        <!-- 机器码和License引导弹窗 -->
        <div id="licenseGuideModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative">
            <!-- 关闭按钮 -->
            <button
              id="closeLicenseGuideModal"
              class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded-full p-1 transition-colors"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
            
            <div class="p-6">
              <div class="text-center mb-6">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">欢迎使用私有化服务</h3>
                <p class="text-sm text-gray-600">请先获取 License 文件以激活您的服务</p>
              </div>
              
              <!-- 机器码显示 -->
              <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">服务器机器码</label>
                <div class="bg-gray-50 rounded-lg p-3 flex items-center justify-between">
                  <code id="modalMachineCode" class="text-sm text-gray-800 font-mono flex-1 break-all">
                    <!-- Machine code will be populated by JavaScript -->
                  </code>
                  <button 
                    id="modalCopyBtn"
                    class="ml-3 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                  >
                    复制
                  </button>
                </div>
                <p class="text-xs text-gray-500 mt-1">请复制此机器码用于申请 License</p>
              </div>
              
              <!-- 按钮组 -->
              <div class="flex space-x-3">
                <button
                  id="applyLicenseBtn"
                  class="flex-1 px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                >
                  申请 License
                </button>
                <button
                  id="goToImportBtn"
                  class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                >
                  前往导入
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 聊天管理页面 -->
        <div id="chatManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">聊天管理</h1>
            <p class="text-gray-600">管理聊天会话、机器人配置和对话记录</p>
          </div>
          
          <div class="space-y-6">
            <!-- 配置选项容器 -->
            <div id="imConfigOptions" class="space-y-6">
              <!-- 我有 IM 服务通道 -->
              <div class="bg-white rounded-lg shadow">
                <div class="p-6">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center">
                      <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                        </svg>
                      </div>
                      <div>
                        <h3 class="text-lg font-semibold text-gray-900">我有 IM 服务通道</h3>
                        <p class="text-sm text-gray-600">使用您自己的IM服务进行聊天通信</p>
                      </div>
                    </div>
                    <button 
                      id="ownIMConfigBtn" 
                      class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                    >
                      去配置
                    </button>
                  </div>
                
                <!-- 我有 IM 服务配置表单 -->
                <div id="ownIMConfigForm" class="hidden mt-6 pt-6 border-t border-gray-200">
                  <form class="space-y-6" id="ownIMForm">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label for="ownIMAppId" class="block text-sm font-medium text-gray-700 mb-2">
                          AppID <span class="text-red-500">*</span>
                        </label>
                        <input
                          type="text"
                          id="ownIMAppId"
                          name="ownIMAppId"
                          required
                          placeholder="请输入AppID"
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                        >
                      </div>
                      
                      <div>
                        <label for="ownIMSecretKey" class="block text-sm font-medium text-gray-700 mb-2">
                          SecretKey <span class="text-red-500">*</span>
                        </label>
                        <input
                          type="text"
                          id="ownIMSecretKey"
                          name="ownIMSecretKey"
                          required
                          placeholder="请输入SecretKey"
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                        >
                      </div>
                    </div>
                    
                    <div class="flex justify-end space-x-4">
                      <button
                        type="button"
                        id="ownIMCancelBtn"
                        class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"
                      >
                        取消
                      </button>
                      <button
                        type="submit"
                        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                      >
                        保存
                      </button>
                    </div>
                  </form>
                </div>
                

              </div>
            </div>
            
                          <!-- 使用平台 IM 服务 -->
              <div class="bg-white rounded-lg shadow">
                <div class="p-6">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center">
                      <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                      </div>
                      <div>
                        <h3 class="text-lg font-semibold text-gray-900">使用平台 IM 服务</h3>
                        <p class="text-sm text-gray-600">使用我们提供的IM服务，无需自行搭建</p>
                      </div>
                    </div>
                    <button 
                      id="platformIMConfigBtn" 
                      class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors"
                    >
                      去配置
                    </button>
                  </div>
                  
                  <!-- 平台 IM 服务配置表单 -->
                  <div id="platformIMConfigForm" class="hidden mt-6 pt-6 border-t border-gray-200">
                    <form class="space-y-6" id="platformIMForm">
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label for="platformIMAppId" class="block text-sm font-medium text-gray-700 mb-2">
                            AppID <span class="text-red-500">*</span>
                          </label>
                          <input
                            type="text"
                            id="platformIMAppId"
                            name="platformIMAppId"
                            required
                            placeholder="请输入AppID"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"
                          >
                        </div>
                        
                        <div>
                          <label for="platformIMSecretKey" class="block text-sm font-medium text-gray-700 mb-2">
                            SecretKey <span class="text-red-500">*</span>
                          </label>
                          <input
                            type="text"
                            id="platformIMSecretKey"
                            name="platformIMSecretKey"
                            required
                            placeholder="请输入SecretKey"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors"
                          >
                        </div>
                      </div>
                      
                      <div class="flex justify-end space-x-4">
                        <button
                          type="button"
                          id="platformIMCancelBtn"
                          class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"
                        >
                          取消
                        </button>
                        <button
                          type="submit"
                          class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors"
                        >
                          保存
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 已配置状态显示区域 -->
            <div id="imConfiguredSection" class="hidden">
              <!-- 我有 IM 服务已配置状态 -->
              <div id="ownIMConfigured" class="hidden bg-white rounded-lg shadow p-6">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900">我有 IM 服务通道</h3>
                    <p class="text-sm text-gray-600">配置已保存</p>
                  </div>
                </div>
                
                <div class="bg-green-50 rounded-lg p-4">
                  <div class="flex items-center mb-3">
                    <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-sm font-medium text-green-800">配置已保存</span>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div>
                      <span class="text-gray-600">AppID:</span>
                      <span id="ownIMAppIdDisplay" class="ml-2 font-mono text-gray-800"></span>
                    </div>
                    <div>
                      <span class="text-gray-600">SecretKey:</span>
                      <span id="ownIMSecretKeyDisplay" class="ml-2 font-mono text-gray-800"></span>
                    </div>
                  </div>
                  <button
                    id="ownIMEditBtn"
                    class="mt-3 text-sm text-blue-600 hover:text-blue-800 underline"
                  >
                    重新配置
                  </button>
                </div>
              </div>
              
              <!-- 平台 IM 服务已配置状态 -->
              <div id="platformIMConfigured" class="hidden bg-white rounded-lg shadow p-6">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900">使用平台 IM 服务</h3>
                    <p class="text-sm text-gray-600">配置已保存</p>
                  </div>
                </div>
                
                <div class="bg-green-50 rounded-lg p-4">
                  <div class="flex items-center mb-3">
                    <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-sm font-medium text-green-800">配置已保存</span>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div>
                      <span class="text-gray-600">AppID:</span>
                      <span id="platformIMAppIdDisplay" class="ml-2 font-mono text-gray-800"></span>
                    </div>
                    <div>
                      <span class="text-gray-600">SecretKey:</span>
                      <span id="platformIMSecretKeyDisplay" class="ml-2 font-mono text-gray-800"></span>
                    </div>
                  </div>
                  <button
                    id="platformIMEditBtn"
                    class="mt-3 text-sm text-purple-600 hover:text-purple-800 underline"
                  >
                    重新配置
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 邮箱管理页面 -->
        <div id="emailManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">邮箱管理</h1>
            <p class="text-gray-600">您可以配置邮箱服务，用于发送系统通知和邮件</p>
          </div>
          
          <!-- 配置引导 -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <div class="flex items-start">
              <svg class="w-5 h-5 text-blue-500 mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div>
                <h4 class="font-medium text-blue-800 mb-1">配置指南</h4>
                <p class="text-sm text-blue-700 mb-2">不知道如何配置邮箱服务？</p>
                <button class="text-sm text-blue-600 hover:text-blue-800 underline hover:bg-blue-100 px-2 py-1 rounded transition-colors" id="configGuideBtn">
                  点击查看配置教程
                </button>
              </div>
            </div>
          </div>
          
          <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6">邮箱服务配置</h3>
            
            <form class="space-y-6" id="emailConfigForm">
              <!-- 发送邮箱账号 -->
              <div>
                <label for="emailAccount" class="block text-sm font-medium text-gray-700 mb-2">
                  发送邮箱账号 <span class="text-red-500">*</span>
                </label>
                <input
                  type="email"
                  id="emailAccount"
                  name="emailAccount"
                  required
                  placeholder="请输入发送邮箱账号"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                >
              </div>
              
              <!-- SMTP 密码 -->
              <div>
                <label for="smtpPassword" class="block text-sm font-medium text-gray-700 mb-2">
                  SMTP 密码 <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                  <input
                    type="password"
                    id="smtpPassword"
                    name="smtpPassword"
                    required
                    placeholder="请输入SMTP密码"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors pr-12"
                  >
                  <button type="button" id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                    </svg>
                  </button>
                </div>
              </div>
              
              <!-- 服务器和端口 -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label for="smtpServer" class="block text-sm font-medium text-gray-700 mb-2">
                    服务器 <span class="text-red-500">*</span>
                  </label>
                  <input
                    type="text"
                    id="smtpServer"
                    name="smtpServer"
                    required
                    placeholder="例：smtp.gmail.com"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                  >
                </div>
                
                <div>
                  <label for="smtpPort" class="block text-sm font-medium text-gray-700 mb-2">
                    端口 <span class="text-red-500">*</span>
                  </label>
                  <input
                    type="number"
                    id="smtpPort"
                    name="smtpPort"
                    required
                    placeholder="例：587"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                  >
                </div>
              </div>
              
              <!-- 按钮组 -->
              <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                <button
                  type="button"
                  class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"
                  id="emailCancelBtn"
                >
                  取消
                </button>
                <button
                  type="submit"
                  class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                  id="emailSaveBtn"
                >
                  保存
                </button>
              </div>
            </form>
            
            <!-- 平台邮箱服务提示 -->
            <div class="mt-8 pt-6 border-t border-gray-200">
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-start">
                  <svg class="w-5 h-5 text-gray-500 mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                  </svg>
                  <div>
                    <h5 class="font-medium text-gray-800 mb-1">平台邮箱服务</h5>
                    <p class="text-sm text-gray-600">若要使用平台的邮箱服务，请联系我们</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 服务器管理页面 -->
        <div id="serverManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">服务器管理</h1>
            <p class="text-gray-600">您可以对服务器进行设置，配置访问地址和域名</p>
          </div>
          
          <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6">服务器配置</h3>
            
            <form class="space-y-6" id="serverConfigForm">
              <!-- IP和域名输入 -->
              <div>
                <label for="serverAddress" class="block text-sm font-medium text-gray-700 mb-2">
                  服务器地址 <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  id="serverAddress"
                  name="serverAddress"
                  required
                  placeholder="请输入 IP和 Https 域名"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                >
                <p class="mt-2 text-sm text-gray-500">
                  例如：192.168.1.100 或 https://your-domain.com
                </p>
              </div>
              
              <!-- 按钮组 -->
              <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                <button
                  type="button"
                  class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"
                  id="serverCancelBtn"
                >
                  取消
                </button>
                <button
                  type="submit"
                  class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                  id="serverSaveBtn"
                >
                  保存
                </button>
              </div>
            </form>
          </div>
        </div>
        
        <!-- License 费用页面 -->
        <div id="licensePricingPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">License 费用</h1>
            <p class="text-gray-600">查看私有化服务的费用信息和购买选项</p>
          </div>
          
          <div class="space-y-6">
            <!-- 基础服务费 -->
            <div class="bg-white rounded-lg shadow p-5">
              <h3 class="text-lg font-semibold text-gray-900 mb-5 flex items-center">
                <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-2m-2 0H5m14 0v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5m6 0v-4a1 1 0 00-1-1h-2a1 1 0 00-1 1v4"></path>
                </svg>
                授权服务
              </h3>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                <!-- 年付 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors relative">
                  <div class="text-xs text-green-600 bg-green-50 border border-green-300 px-2 py-0.5 rounded-full inline-block absolute top-3 right-3 animate-pulse">
                    推荐选择
                  </div>
                  <div class="text-center">
                    <h4 class="text-base font-semibold text-gray-900 mb-1">年付</h4>
                    <div class="text-2xl font-bold text-blue-600 mb-2">¥88,000.00</div>
                    <p class="text-sm text-gray-600 mb-2">360 天服务</p>
                  </div>
                </div>
                
                <!-- 半年付 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                  <div class="text-center">
                    <h4 class="text-base font-semibold text-gray-900 mb-1">半年付</h4>
                    <div class="text-2xl font-bold text-blue-600 mb-2">¥44,000.00</div>
                    <p class="text-sm text-gray-600 mb-2">180 天服务</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 权益服务费 -->
            <div class="bg-white rounded-lg shadow p-5">
              <div class="text-center mb-6">
                <h3 class="text-lg font-semibold text-gray-900 flex items-center justify-center mb-1">
                  <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  权益服务费
                </h3>
                <p class="text-sm text-gray-500">服务周期内可随时扩展任意权益</p>
              </div>
              
              <!-- 三个权益项目的网格布局 -->
              <div class="grid grid-cols-1 lg:grid-cols-3 gap-5">
                <!-- 坐席资费 -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200 hover:shadow-lg transition-all duration-300">
                  <div class="text-center">
                    <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                      <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                      </svg>
                    </div>
                    <h4 class="text-base font-semibold text-gray-900 mb-1">坐席资费</h4>
                    <div class="text-2xl font-bold text-blue-600 mb-1">¥12.00</div>
                    <div class="text-sm text-gray-600 mb-2">每个坐席</div>
                    <div class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full mb-2">
                      服务周期内生效
                    </div>
                    <p class="text-xs text-gray-500">更多坐席需求，请联系客户经理</p>
                  </div>
                </div>
                
                <!-- 社媒账号资费 -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200 hover:shadow-lg transition-all duration-300">
                  <div class="text-center">
                    <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3">
                      <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                      </svg>
                    </div>
                    <h4 class="text-base font-semibold text-gray-900 mb-1">社媒账号资费</h4>
                    <div class="text-2xl font-bold text-green-600 mb-1">¥12.00</div>
                    <div class="text-sm text-gray-600 mb-2">每个账号</div>
                    <div class="inline-block bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full mb-2">
                      服务周期内生效
                    </div>
                    <p class="text-xs text-gray-500">更多账号需求，请联系客户经理</p>
                  </div>
                </div>
                
                <!-- 翻译字符资费 -->
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200 hover:shadow-lg transition-all duration-300">
                  <div class="text-center">
                    <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3">
                      <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
                      </svg>
                    </div>
                    <h4 class="text-base font-semibold text-gray-900 mb-1">翻译字符资费</h4>
                    <div class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-0.5 rounded-full mb-3">
                      一次性到账
                    </div>
                    
                    <!-- 翻译字符选项 -->
                    <div class="space-y-1.5">
                      <div class="bg-white rounded p-1.5 border border-purple-200">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-gray-600">1万个字符</span>
                          <span class="text-sm font-bold text-purple-600">¥100</span>
                        </div>
                      </div>
                      <div class="bg-white rounded p-1.5 border border-purple-200">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-gray-600">10万个字符</span>
                          <span class="text-sm font-bold text-purple-600">¥800</span>
                        </div>
                      </div>
                      <div class="bg-white rounded p-1.5 border border-purple-200">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-gray-600">100万个字符</span>
                          <span class="text-sm font-bold text-purple-600">¥5,000</span>
                        </div>
                      </div>
                      <div class="bg-white rounded p-1.5 border border-purple-200">
                        <div class="flex justify-between items-center">
                          <span class="text-xs text-gray-600">1000万个字符</span>
                          <span class="text-sm font-bold text-purple-600">¥30,000</span>
                        </div>
                      </div>
                    </div>
                    
                    <p class="text-xs text-gray-500 mt-2">更多翻译字符数需求，请联系客户经理</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 购买按钮 -->
            <div class="bg-white rounded-lg shadow p-5">
              <div class="text-center">
                <h3 class="text-base font-semibold text-gray-900 mb-3">准备购买 License？</h3>
                <p class="text-gray-600 mb-4">联系我们的销售团队，获取专业的服务方案</p>
                <button
                  id="buyLicenseBtn"
                  class="inline-flex items-center px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-base font-medium rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl"
                >
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 10-4 0v4.01"></path>
                  </svg>
                  购买 License
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- AI 知识库管理页面 -->
        <div id="knowledgeBaseManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">知识库管理</h1>
            <p class="text-gray-600">创建和管理AI知识库，关联不同的社媒账号</p>
          </div>
          
          <!-- 创建知识库按钮 -->
          <div class="mb-6">
            <button id="createKnowledgeBaseBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex items-center">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
              创建知识库
            </button>
          </div>
          
          <!-- 知识库列表 -->
          <div class="bg-white rounded-lg shadow">
            <div class="p-6 border-b border-gray-200">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-gray-900">知识库列表</h3>
                <div class="flex items-center space-x-3">
                  <select class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                    <option value="">全部渠道</option>
                    <option value="wechat">微信</option>
                    <option value="douyin">抖音</option>
                    <option value="xiaohongshu">小红书</option>
                    <option value="weibo">微博</option>
                  </select>
                  <input type="text" placeholder="搜索知识库..." class="border border-gray-300 rounded-md px-3 py-2 text-sm w-48">
                </div>
              </div>
            </div>
            
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">知识库名称</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">关联账号</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文档数量</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">知识点数量</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody id="knowledgeBaseTableBody" class="bg-white divide-y divide-gray-200">
                  <!-- 数据将通过JavaScript动态加载 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- 文档管理页面 -->
        <div id="documentManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">文档管理</h1>
            <p class="text-gray-600">上传、编辑和管理知识库文档</p>
          </div>
          
          <!-- 文档操作栏 -->
          <div class="mb-6 flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <button id="uploadDocumentBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
                上传文档
              </button>
              <button id="batchDeleteBtn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
                批量删除
              </button>
            </div>
            <div class="flex items-center space-x-3">
              <select class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                <option value="">全部知识库</option>
                <option value="kb1">客服知识库</option>
                <option value="kb2">产品介绍库</option>
                <option value="kb3">售后服务库</option>
              </select>
              <input type="text" placeholder="搜索文档..." class="border border-gray-300 rounded-md px-3 py-2 text-sm w-48">
            </div>
          </div>
          
          <!-- 文档列表 -->
          <div class="bg-white rounded-lg shadow">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left">
                      <input type="checkbox" id="selectAllDocs" class="rounded border-gray-300">
                    </th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文档名称</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">所属知识库</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文件类型</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">文件大小</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">提取状态</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">上传时间</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody id="documentTableBody" class="bg-white divide-y divide-gray-200">
                  <!-- 数据将通过JavaScript动态加载 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- 知识点管理页面 -->
        <div id="knowledgePointManagementPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">知识点管理</h1>
            <p class="text-gray-600">管理问答对和知识片段</p>
          </div>
          
          <!-- 知识点操作栏 -->
          <div class="mb-6 flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <button id="addKnowledgePointBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                添加知识点
              </button>
              <button id="extractFromDocBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                </svg>
                从文档提取
              </button>
            </div>
            <div class="flex items-center space-x-3">
              <select class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                <option value="">全部知识库</option>
                <option value="kb1">客服知识库</option>
                <option value="kb2">产品介绍库</option>
                <option value="kb3">售后服务库</option>
              </select>
              <input type="text" placeholder="搜索知识点..." class="border border-gray-300 rounded-md px-3 py-2 text-sm w-48">
            </div>
          </div>
          
          <!-- 知识点列表 -->
          <div class="space-y-4" id="knowledgePointsList">
            <!-- 知识点卡片将通过JavaScript动态加载 -->
          </div>
        </div>
        
        <!-- 训练测试页面 -->
        <div id="trainingTestPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">训练测试</h1>
            <p class="text-gray-600">训练AI模型并测试回答效果</p>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- 模型训练 -->
            <div class="bg-white rounded-lg shadow p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">模型训练</h3>
              
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">选择知识库</label>
                  <select class="w-full border border-gray-300 rounded-md px-3 py-2">
                    <option value="">请选择知识库</option>
                    <option value="kb1">客服知识库</option>
                    <option value="kb2">产品介绍库</option>
                    <option value="kb3">售后服务库</option>
                  </select>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">训练模式</label>
                  <div class="space-y-2">
                    <label class="flex items-center">
                      <input type="radio" name="trainMode" value="incremental" class="mr-2" checked>
                      <span class="text-sm">增量训练（基于现有模型）</span>
                    </label>
                    <label class="flex items-center">
                      <input type="radio" name="trainMode" value="full" class="mr-2">
                      <span class="text-sm">全量训练（重新训练）</span>
                    </label>
                  </div>
                </div>
                
                <button id="startTrainingBtn" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                  开始训练
                </button>
                
                <!-- 训练进度 -->
                <div id="trainingProgress" class="hidden">
                  <div class="flex items-center justify-between text-sm text-gray-600 mb-2">
                    <span>训练进度</span>
                    <span id="progressPercent">0%</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 效果测试 -->
            <div class="bg-white rounded-lg shadow p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">效果测试</h3>
              
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">测试问题</label>
                  <textarea id="testQuestion" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="输入测试问题..."></textarea>
                </div>
                
                <button id="testAnswerBtn" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors">
                  获取AI回答
                </button>
                
                <!-- AI回答结果 -->
                <div id="aiAnswerResult" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-2">AI回答</label>
                  <div class="bg-gray-50 border border-gray-300 rounded-md p-3 min-h-[100px]">
                    <div id="aiAnswerContent" class="text-gray-800"></div>
                  </div>
                  
                  <!-- 回答评价 -->
                  <div class="mt-3">
                    <label class="block text-sm font-medium text-gray-700 mb-2">回答质量评价</label>
                    <div class="flex items-center space-x-4">
                      <button class="flex items-center text-green-600 hover:text-green-700">
                        <svg class="w-5 h-5 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"></path>
                        </svg>
                        满意
                      </button>
                      <button class="flex items-center text-red-600 hover:text-red-700">
                        <svg class="w-5 h-5 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.106-1.79l-.05-.025A4 4 0 0011.057 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z"></path>
                        </svg>
                        不满意
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 数据统计页面 -->
        <div id="dataStatisticsPage" class="page-content hidden">
          <div class="mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-2">数据统计</h1>
            <p class="text-gray-600">查看知识库使用情况和效果分析</p>
          </div>
          
          <!-- 统计卡片 -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow p-6">
              <div class="flex items-center">
                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                  <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
                <div>
                  <p class="text-sm text-gray-600">总查询次数</p>
                  <p class="text-2xl font-bold text-gray-900">1,234</p>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
              <div class="flex items-center">
                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                  <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
                <div>
                  <p class="text-sm text-gray-600">回答准确率</p>
                  <p class="text-2xl font-bold text-gray-900">87.5%</p>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
              <div class="flex items-center">
                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                  <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
                <div>
                  <p class="text-sm text-gray-600">平均响应时间</p>
                  <p class="text-2xl font-bold text-gray-900">0.8s</p>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
              <div class="flex items-center">
                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4">
                  <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                  </svg>
                </div>
                <div>
                  <p class="text-sm text-gray-600">用户满意度</p>
                  <p class="text-2xl font-bold text-gray-900">92.3%</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 图表区域 -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white rounded-lg shadow p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">查询趋势</h3>
              <div class="h-64 flex items-center justify-center text-gray-500">
                <div class="text-center">
                  <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z"></path>
                  </svg>
                  <p>图表功能开发中</p>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">热门问题</h3>
              <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <span class="text-sm text-gray-800">如何退换货？</span>
                  <span class="text-sm text-gray-500">156次</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <span class="text-sm text-gray-800">产品保修期多长？</span>
                  <span class="text-sm text-gray-500">134次</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <span class="text-sm text-gray-800">支持哪些支付方式？</span>
                  <span class="text-sm text-gray-500">98次</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                  <span class="text-sm text-gray-800">配送时间多久？</span>
                  <span class="text-sm text-gray-500">87次</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // 常量配置
    const CONFIG = {
      MACHINE_CODE: 'MACHINE-CODE-ABC123-DEF456-GHI789-JKL012-MNO345'
    };

    document.addEventListener('DOMContentLoaded', function() {
      // 检查登录状态
      if (sessionStorage.getItem('isPrivateAdminLoggedIn') !== 'true') {
        window.location.href = 'private-admin-login.html';
        return;
      }
      
      // 显示用户账号
      const userAccount = sessionStorage.getItem('privateAdminUser');
      if (userAccount) {
        document.getElementById('userAccount').textContent = userAccount;
      }
      
      // 页面映射
      const pageMap = {
        'company-info': 'companyInfoPage',
        'chat-management': 'chatManagementPage',
        'email-management': 'emailManagementPage',
        'server-management': 'serverManagementPage',
        'license-pricing': 'licensePricingPage',
        'knowledge-base-management': 'knowledgeBaseManagementPage',
        'document-management': 'documentManagementPage',
        'knowledge-point-management': 'knowledgePointManagementPage',
        'training-test': 'trainingTestPage',
        'data-statistics': 'dataStatisticsPage'
      };
      
      // 侧边栏切换
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      const contentArea = document.querySelector('.content-area');
      
      sidebarToggle.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        contentArea.classList.toggle('expanded');
      });
      
      // 企业设置菜单切换
      const enterpriseMenu = document.getElementById('enterpriseMenu');
      const enterpriseSubmenu = document.getElementById('enterpriseSubmenu');
      const enterpriseArrow = document.getElementById('enterpriseArrow');
      
      enterpriseMenu.addEventListener('click', function() {
        const isExpanded = enterpriseSubmenu.style.display !== 'none';
        enterpriseSubmenu.style.display = isExpanded ? 'none' : 'block';
        enterpriseArrow.style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(90deg)';
      });
      
      // 初始化企业设置菜单为展开状态
      enterpriseSubmenu.style.display = 'block';
      enterpriseArrow.style.transform = 'rotate(90deg)';
      
      // AI知识库菜单切换
      const aiKnowledgeMenu = document.getElementById('aiKnowledgeMenu');
      const aiKnowledgeSubmenu = document.getElementById('aiKnowledgeSubmenu');
      const aiKnowledgeArrow = document.getElementById('aiKnowledgeArrow');
      
      aiKnowledgeMenu.addEventListener('click', function() {
        const isExpanded = !aiKnowledgeSubmenu.classList.contains('hidden');
        if (isExpanded) {
          aiKnowledgeSubmenu.classList.add('hidden');
          aiKnowledgeArrow.style.transform = 'rotate(0deg)';
        } else {
          aiKnowledgeSubmenu.classList.remove('hidden');
          aiKnowledgeArrow.style.transform = 'rotate(90deg)';
        }
      });
      
      // 二级菜单项点击事件（稍后会被License相关逻辑替换）
      
      // 用户菜单切换
      const userMenuButton = document.getElementById('userMenuButton');
      const userDropdownMenu = document.getElementById('userDropdownMenu');
      
      userMenuButton.addEventListener('click', function() {
        userDropdownMenu.classList.toggle('hidden');
      });
      
      // 点击页面其他地方关闭下拉菜单
      document.addEventListener('click', function(e) {
        if (!userMenuButton.contains(e.target) && !userDropdownMenu.contains(e.target)) {
          userDropdownMenu.classList.add('hidden');
        }
      });
      
      // 退出登录
      document.getElementById('logoutBtn').addEventListener('click', function(e) {
        e.preventDefault();
        sessionStorage.removeItem('isPrivateAdminLoggedIn');
        sessionStorage.removeItem('privateAdminUser');
        window.location.href = 'private-admin-login.html';
      });
      
      // 服务器管理相关功能
      const serverConfigForm = document.getElementById('serverConfigForm');
      const serverCancelBtn = document.getElementById('serverCancelBtn');
      
      if (serverConfigForm) {
        serverConfigForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const serverAddress = document.getElementById('serverAddress').value.trim();
          
          if (!serverAddress) {
            alert('请输入服务器地址');
            return;
          }
          
          // 模拟保存操作
          alert('服务器配置保存成功！');
          console.log('服务器地址:', serverAddress);
        });
      }
      
      if (serverCancelBtn) {
        serverCancelBtn.addEventListener('click', function() {
          document.getElementById('serverAddress').value = '';
        });
      }
      
      // 邮箱管理相关功能
      const emailConfigForm = document.getElementById('emailConfigForm');
      const emailCancelBtn = document.getElementById('emailCancelBtn');
      const togglePassword = document.getElementById('togglePassword');
      const configGuideBtn = document.getElementById('configGuideBtn');
      
      if (emailConfigForm) {
        emailConfigForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const emailAccount = document.getElementById('emailAccount').value.trim();
          const smtpPassword = document.getElementById('smtpPassword').value.trim();
          const smtpServer = document.getElementById('smtpServer').value.trim();
          const smtpPort = document.getElementById('smtpPort').value.trim();
          
          if (!emailAccount || !smtpPassword || !smtpServer || !smtpPort) {
            alert('请填写所有必填字段');
            return;
          }
          
          // 模拟保存操作
          alert('邮箱配置保存成功！');
          console.log('邮箱配置:', {
            emailAccount,
            smtpPassword: '***', // 密码不打印
            smtpServer,
            smtpPort
          });
        });
      }
      
      if (emailCancelBtn) {
        emailCancelBtn.addEventListener('click', function() {
          document.getElementById('emailAccount').value = '';
          document.getElementById('smtpPassword').value = '';
          document.getElementById('smtpServer').value = '';
          document.getElementById('smtpPort').value = '';
        });
      }
      
      // 密码显示/隐藏切换
      if (togglePassword) {
        togglePassword.addEventListener('click', function() {
          const passwordInput = document.getElementById('smtpPassword');
          const isPassword = passwordInput.type === 'password';
          
          passwordInput.type = isPassword ? 'text' : 'password';
          
          // 更新图标
          this.innerHTML = isPassword 
            ? '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path></svg>'
            : '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>';
        });
      }
      
             // 配置指南按钮
       if (configGuideBtn) {
         configGuideBtn.addEventListener('click', function() {
           // 高亮效果
           this.style.backgroundColor = '#dbeafe';
           this.style.color = '#1d4ed8';
           
           // 模拟点击反馈
           setTimeout(() => {
             this.style.backgroundColor = '';
             this.style.color = '';
             alert('配置教程功能开发中，敬请期待！');
           }, 200);
         });
       }
       
       // License 管理相关功能
       const licenseGuideModal = document.getElementById('licenseGuideModal');
       const copyMachineCodeBtn = document.getElementById('copyMachineCodeBtn');
       const modalCopyBtn = document.getElementById('modalCopyBtn');
       const applyLicenseBtn = document.getElementById('applyLicenseBtn');
       const goToImportBtn = document.getElementById('goToImportBtn');
       const licenseUploadBtn = document.getElementById('licenseUploadBtn');
       const licenseFileInput = document.getElementById('licenseFileInput');
       const licenseReuploadBtn = document.getElementById('licenseReuploadBtn');
       
       // 初始化机器码显示
       function initializeMachineCode() {
         document.getElementById('machineCode').textContent = CONFIG.MACHINE_CODE;
         const modalMachineCode = document.getElementById('modalMachineCode');
         if (modalMachineCode) {
           modalMachineCode.textContent = CONFIG.MACHINE_CODE;
         }
       }
       
       // 初始化机器码
       initializeMachineCode();
       
       // 检查是否第一次访问企业信息页面
       function checkFirstVisit() {
         const hasVisited = localStorage.getItem('hasVisitedCompanyInfo');
         const companyPage = document.getElementById('companyInfoPage');
         // 只有在未授权状态且第一次访问时才显示弹窗
         if (!hasVisited && companyPage && !companyPage.classList.contains('hidden') && currentStatus === 'unauthorized') {
           licenseGuideModal.classList.remove('hidden');
         }
       }
       
       // 复制机器码功能
       function copyMachineCode() {
         navigator.clipboard.writeText(CONFIG.MACHINE_CODE).then(() => {
           alert('机器码已复制到剪贴板！');
         }).catch(() => {
           // 降级方案
           const textArea = document.createElement('textarea');
           textArea.value = CONFIG.MACHINE_CODE;
           document.body.appendChild(textArea);
           textArea.select();
           document.execCommand('copy');
           document.body.removeChild(textArea);
           alert('机器码已复制到剪贴板！');
         });
       }
       
       // 复制按钮事件
       if (copyMachineCodeBtn) {
         copyMachineCodeBtn.addEventListener('click', copyMachineCode);
       }
       
       if (modalCopyBtn) {
         modalCopyBtn.addEventListener('click', copyMachineCode);
       }
       
       // 申请License按钮
       if (applyLicenseBtn) {
         applyLicenseBtn.addEventListener('click', function() {
           window.location.href = 'private-login.html';
         });
       }
       
       // 前往导入按钮
       if (goToImportBtn) {
         goToImportBtn.addEventListener('click', function() {
           licenseGuideModal.classList.add('hidden');
           localStorage.setItem('hasVisitedCompanyInfo', 'true');
         });
       }
       
       // 关闭弹窗按钮
       const closeLicenseGuideModal = document.getElementById('closeLicenseGuideModal');
       if (closeLicenseGuideModal) {
         closeLicenseGuideModal.addEventListener('click', function() {
           licenseGuideModal.classList.add('hidden');
           localStorage.setItem('hasVisitedCompanyInfo', 'true');
         });
       }
       
       // 点击弹窗背景关闭
       if (licenseGuideModal) {
         licenseGuideModal.addEventListener('click', function(e) {
           // 只有点击背景蒙层时才关闭，点击弹窗内容不关闭
           if (e.target === licenseGuideModal) {
             licenseGuideModal.classList.add('hidden');
             localStorage.setItem('hasVisitedCompanyInfo', 'true');
           }
         });
       }
       
       // ESC键关闭弹窗
       document.addEventListener('keydown', function(e) {
         if (e.key === 'Escape' && !licenseGuideModal.classList.contains('hidden')) {
           licenseGuideModal.classList.add('hidden');
           localStorage.setItem('hasVisitedCompanyInfo', 'true');
         }
       });
       
       // License文件上传按钮（一键上传）
       if (licenseUploadBtn) {
         licenseUploadBtn.addEventListener('click', function() {
           licenseFileInput.click();
         });
       }
       
       // License文件选择和自动上传
       if (licenseFileInput) {
         licenseFileInput.addEventListener('change', function(e) {
           const file = e.target.files[0];
           if (file) {
             // 模拟上传和验证过程
             alert('License文件上传成功！');
             
             // 显示已激活状态，隐藏上传按钮
             document.getElementById('licenseFileNameDisplay').textContent = file.name;
             document.getElementById('licenseActiveStatus').classList.remove('hidden');
             licenseUploadBtn.classList.add('hidden');
             
             // 隐藏License申请提醒
             document.getElementById('licenseNotice').classList.add('hidden');
             
             // 显示企业配置区域
             document.getElementById('companyConfigSection').classList.remove('hidden');
             
             // 重置文件输入
             licenseFileInput.value = '';
           }
         });
       }
       
       // 重新上传License（直接打开文件选择）
       if (licenseReuploadBtn) {
         licenseReuploadBtn.addEventListener('click', function() {
           // 直接打开文件选择对话框，保持当前激活状态显示
           licenseFileInput.click();
           
           // 重置文件输入
           licenseFileInput.value = '';
         });
       }
       
       // 修改原有的页面切换逻辑，加入License弹窗检查
       document.querySelectorAll('.submenu-item').forEach(item => {
         const originalHandler = item.onclick;
         item.addEventListener('click', function() {
           const pageName = this.dataset.page;
           
           // 执行原有的页面切换逻辑
           // 移除所有活动状态
           document.querySelectorAll('.submenu-item').forEach(i => i.classList.remove('active'));
           document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
           document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
           
           // 设置当前项为活动状态
           this.classList.add('active');
           
           // 显示对应页面
           const pageId = pageMap[pageName];
           if (pageId) {
             const page = document.getElementById(pageId);
             page.classList.remove('hidden');
             page.classList.add('fade-in');
             
             // 移除动画类以便下次重新触发
             setTimeout(() => {
               page.classList.remove('fade-in');
             }, 300);
             
             // 如果是企业信息页面，检查是否需要显示弹窗
             if (pageName === 'company-info') {
               setTimeout(checkFirstVisit, 150);
             }
           }
         });
       });
       
       // License费用菜单点击事件
       const licensePricingMenu = document.getElementById('licensePricingMenu');
       if (licensePricingMenu) {
         licensePricingMenu.addEventListener('click', function() {
           const pageName = this.dataset.page;
           
           // 移除所有活动状态
           document.querySelectorAll('.submenu-item').forEach(i => i.classList.remove('active'));
           document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
           document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
           
           // 设置当前菜单为活动状态
           this.classList.add('active');
           
           // 显示对应页面
           const pageId = pageMap[pageName];
           if (pageId) {
             const page = document.getElementById(pageId);
             page.classList.remove('hidden');
             page.classList.add('fade-in');
             
             // 移除动画类以便下次重新触发
             setTimeout(() => {
               page.classList.remove('fade-in');
             }, 300);
           }
         });
       }
       
       // 初始加载时检查（企业信息页面默认显示）
       setTimeout(checkFirstVisit, 500);
       
       // 初始化默认状态
       setTimeout(() => {
         applyStatusConfig('unauthorized');
       }, 100);
       
       // 状态筛选功能
       const statusButtons = document.querySelectorAll('.status-btn');
       let currentStatus = 'unauthorized'; // 默认状态
       
       // 状态数据配置
       const statusConfig = {
         'unauthorized': {
           showLicenseNotice: true,
           showCompanyConfig: false,
           showLicenseActive: false,
           showServiceButtons: false,
           licenseData: {
             fileName: '',
             companyCode: '',
             expireDate: '',
             version: '未授权',
             versionClass: 'bg-gray-600',
             members: 0,
             socialAccounts: 0,
             translateChars: '0'
           }
         },
         'trial-unexpired': {
           showLicenseNotice: false,
           showCompanyConfig: true,
           showLicenseActive: true,
           showServiceButtons: true,
           licenseData: {
             fileName: 'trial_license_valid.lic',
             companyCode: 'KJN22',
             expireDate: '2025-06-30',
             version: '试用版',
             versionClass: 'bg-blue-600',
             members: 5,
             socialAccounts: 5,
             translateChars: '10,000'
           }
         },
         'trial-expiring': {
           showLicenseNotice: false,
           showCompanyConfig: true,
           showLicenseActive: true,
           showServiceButtons: true,
           licenseData: {
             fileName: 'trial_license_expiring.lic',
             companyCode: 'KJN23',
             expireDate: '2024-12-31',
             version: '试用版',
             versionClass: 'bg-orange-600',
             members: 5,
             socialAccounts: 5,
             translateChars: '10,000'
           }
         },
         'trial-expired': {
           showLicenseNotice: false,
           showCompanyConfig: true,
           showLicenseActive: true,
           showServiceButtons: true,
           licenseData: {
             fileName: 'trial_license_expired.lic',
             companyCode: 'KJN24',
             expireDate: '2024-11-30',
             version: '试用版',
             versionClass: 'bg-red-600',
             members: 5,
             socialAccounts: 5,
             translateChars: '10,000'
           }
         },
         'official': {
           showLicenseNotice: false,
           showCompanyConfig: true,
           showLicenseActive: true,
           showServiceButtons: true,
           licenseData: {
             fileName: 'official_license.lic',
             companyCode: 'KJN25',
             expireDate: '2025-12-31',
             version: '正式版',
             versionClass: 'bg-blue-600',
             members: 50,
             socialAccounts: 100,
             translateChars: '1,000,000'
           }
         }
       };
       
       // 状态切换处理
       statusButtons.forEach(button => {
         button.addEventListener('click', function() {
           const newStatus = this.dataset.status;
           if (newStatus !== currentStatus) {
             // 更新按钮状态
             statusButtons.forEach(btn => btn.classList.remove('active'));
             this.classList.add('active');
             
             // 更新当前状态
             currentStatus = newStatus;
             
             // 应用状态配置
             applyStatusConfig(newStatus);
           }
         });
       });
       
       // 应用状态配置
       function applyStatusConfig(status) {
         const config = statusConfig[status];
         
         // 控制License申请提醒显示
         const licenseNotice = document.getElementById('licenseNotice');
         if (config.showLicenseNotice) {
           licenseNotice.classList.remove('hidden');
         } else {
           licenseNotice.classList.add('hidden');
         }
         
         // 控制企业配置区域显示
         const companyConfigSection = document.getElementById('companyConfigSection');
         if (config.showCompanyConfig) {
           companyConfigSection.classList.remove('hidden');
         } else {
           companyConfigSection.classList.add('hidden');
         }
         
         // 控制正式版专有功能显示
         const officialVersionButtons = document.getElementById('officialVersionButtons');
         const currentVersionBadge = document.getElementById('currentVersionBadge');
         const versionBadgeContainer = document.getElementById('versionBadgeContainer');
         const versionBlock = document.getElementById('versionBlock');
         const benefitsGrid = document.getElementById('benefitsGrid');
         const expiredNotice = document.getElementById('expiredNotice');
         const expiringNotice = document.getElementById('expiringNotice');
         const purchaseLicenseButton = document.getElementById('purchaseLicenseButton');
         
         if (status === 'official') {
           // 显示正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.remove('hidden');
           }
           // 隐藏原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.add('hidden');
           }
           // 显示版本块（4列布局的第一个）- 正式版样式
           if (versionBlock) {
             versionBlock.classList.remove('hidden');
             versionBlock.className = 'text-center p-3 bg-gradient-to-br from-blue-500 to-green-500 rounded-lg flex items-center justify-center';
           }
           // 将网格改为4列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-4 gap-4';
           }
           // 隐藏已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.add('hidden');
           }
           // 隐藏即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.add('hidden');
           }
           // 隐藏购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.add('hidden');
           }
         } else if (status === 'trial-expired') {
           // 试用版-已过期：版本标识移动到网格第一个位置
           // 隐藏正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.add('hidden');
           }
           // 隐藏原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.add('hidden');
           }
           // 显示版本块（4列布局的第一个）- 试用版-已过期样式
           if (versionBlock) {
             versionBlock.classList.remove('hidden');
             versionBlock.className = 'text-center p-3 bg-gradient-to-br from-green-500 to-yellow-500 rounded-lg flex items-center justify-center';
           }
           // 将网格改为4列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-4 gap-4';
           }
           // 显示已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.remove('hidden');
           }
           // 隐藏即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.add('hidden');
           }
           // 显示购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.remove('hidden');
           }
         } else if (status === 'trial-expiring') {
           // 试用版-即将过期：版本标识移动到网格第一个位置
           // 隐藏正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.add('hidden');
           }
           // 隐藏原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.add('hidden');
           }
           // 显示版本块（4列布局的第一个）- 试用版-即将过期样式
           if (versionBlock) {
             versionBlock.classList.remove('hidden');
             versionBlock.className = 'text-center p-3 bg-gradient-to-br from-green-500 to-yellow-500 rounded-lg flex items-center justify-center';
           }
           // 将网格改为4列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-4 gap-4';
           }
           // 隐藏已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.add('hidden');
           }
           // 显示即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.remove('hidden');
           }
           // 显示购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.remove('hidden');
           }
         } else if (status === 'trial-unexpired') {
           // 试用版-未过期：版本标识移动到网格第一个位置
           // 隐藏正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.add('hidden');
           }
           // 隐藏原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.add('hidden');
           }
           // 显示版本块（4列布局的第一个）- 试用版-未过期样式
           if (versionBlock) {
             versionBlock.classList.remove('hidden');
             versionBlock.className = 'text-center p-3 bg-gradient-to-br from-green-500 to-yellow-500 rounded-lg flex items-center justify-center';
           }
           // 将网格改为4列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-4 gap-4';
           }
           // 隐藏已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.add('hidden');
           }
           // 隐藏即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.add('hidden');
           }
           // 显示购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.remove('hidden');
           }
         } else if (status === 'unauthorized') {
           // 未授权状态：版本标识移动到网格第一个位置
           // 隐藏正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.add('hidden');
           }
           // 隐藏原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.add('hidden');
           }
           // 显示版本块（4列布局的第一个）- 未授权样式
           if (versionBlock) {
             versionBlock.classList.remove('hidden');
             versionBlock.className = 'text-center p-3 bg-gradient-to-br from-green-500 to-yellow-500 rounded-lg flex items-center justify-center';
           }
           // 将网格改为4列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-4 gap-4';
           }
           // 隐藏已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.add('hidden');
           }
           // 隐藏即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.add('hidden');
           }
           // 显示购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.remove('hidden');
           }
         } else {
           // 其他状态：显示原位置的版本标识，3列布局
           // 隐藏正式版专有按钮
           if (officialVersionButtons) {
             officialVersionButtons.classList.add('hidden');
           }
           // 显示原位置的版本标识
           if (versionBadgeContainer) {
             versionBadgeContainer.classList.remove('hidden');
           }
           // 隐藏版本块
           if (versionBlock) {
             versionBlock.classList.add('hidden');
           }
           // 将网格改回3列
           if (benefitsGrid) {
             benefitsGrid.className = 'grid grid-cols-1 md:grid-cols-3 gap-4';
           }
           // 隐藏已过期提醒
           if (expiredNotice) {
             expiredNotice.classList.add('hidden');
           }
           // 隐藏即将过期提醒
           if (expiringNotice) {
             expiringNotice.classList.add('hidden');
           }
           // 隐藏购买License授权按钮
           if (purchaseLicenseButton) {
             purchaseLicenseButton.classList.add('hidden');
           }
         }
         
         // 控制License激活状态
         const licenseActiveStatus = document.getElementById('licenseActiveStatus');
         const licenseUploadBtn = document.getElementById('licenseUploadBtn');
         
         if (config.showLicenseActive && config.licenseData) {
           // 显示激活状态
           licenseActiveStatus.classList.remove('hidden');
           licenseUploadBtn.classList.add('hidden');
           
           // 更新激活状态信息
           document.getElementById('licenseFileNameDisplay').textContent = config.licenseData.fileName;
           
           // 更新授权信息
           updateAuthorizationInfo(config.licenseData);
         } else if (status === 'unauthorized' && config.licenseData) {
           // 未授权状态：显示上传按钮但也更新权益信息
           licenseActiveStatus.classList.add('hidden');
           licenseUploadBtn.classList.remove('hidden');
           
           // 更新授权信息（显示未授权的权益数据）
           updateAuthorizationInfo(config.licenseData);
         } else {
           // 显示上传按钮
           licenseActiveStatus.classList.add('hidden');
           licenseUploadBtn.classList.remove('hidden');
         }
       }
       
       // 更新授权信息
       function updateAuthorizationInfo(data) {
         // 更新企业标识码
         const companyCodeElement = document.querySelector('.space-y-6 .grid .flex .flex:first-child span:last-child');
         if (companyCodeElement) {
           companyCodeElement.textContent = data.companyCode;
         }
         
         // 更新到期时间
         const expireDateElement = document.querySelector('.space-y-6 .grid .flex:last-child .flex:first-child span:last-child');
         if (expireDateElement) {
           expireDateElement.textContent = data.expireDate;
         }
         
         // 更新版本信息
         const versionElement = document.getElementById('currentVersionBadge');
         const versionDisplay = document.getElementById('versionDisplay');
         
         // 更新原位置的版本标识（小徽章样式）
         if (versionElement) {
           versionElement.textContent = data.version;
           versionElement.className = `px-3 py-1 ${data.versionClass} text-white text-sm rounded-full self-start`;
         }
         
         // 更新版本块中的版本显示（大号样式）
         if (versionDisplay) {
           versionDisplay.textContent = data.version;
           versionDisplay.className = 'text-2xl font-bold text-white';
         }
         
         // 更新权益数据
         const memberElement = document.getElementById('memberCount');
         const socialElement = document.getElementById('socialAccountCount');
         const translateElement = document.getElementById('translateCharCount');
         
         if (memberElement) memberElement.textContent = data.members;
         if (socialElement) socialElement.textContent = data.socialAccounts;
         if (translateElement) translateElement.textContent = data.translateChars;
       }
       
       // 企业信息表单处理
       const companyInfoForm = document.getElementById('companyInfoForm');
       const companyInfoCancelBtn = document.getElementById('companyInfoCancelBtn');
       
       if (companyInfoForm) {
         companyInfoForm.addEventListener('submit', function(e) {
           e.preventDefault();
           
           const formData = new FormData(this);
           const companyData = {};
           for (let [key, value] of formData.entries()) {
             companyData[key] = value.trim();
           }
           
           // 验证必填字段
           if (!companyData.companyName || !companyData.companyEmail) {
             alert('请填写所有必填字段');
             return;
           }
           
           // 模拟保存操作
           alert('企业信息保存成功！');
           console.log('企业信息:', companyData);
         });
       }
       
       if (companyInfoCancelBtn) {
         companyInfoCancelBtn.addEventListener('click', function() {
           // 重置表单到默认值
           document.getElementById('companyName').value = 'AIOChat科技有限公司';
           document.getElementById('companyEmail').value = 'admin@aiochat.com';
           document.getElementById('contactName').value = '';
           document.getElementById('contactPhone').value = '';
           document.getElementById('telegram').value = '';
           document.getElementById('whatsapp').value = '';
         });
       }
       
       // Logo上传处理
       const logoUploadBtn = document.getElementById('logoUploadBtn');
       const logoFileInput = document.getElementById('logoFileInput');
       const logoRemoveBtn = document.getElementById('logoRemoveBtn');
       const logoPreview = document.getElementById('logoPreview');
       
       if (logoUploadBtn) {
         logoUploadBtn.addEventListener('click', function() {
           logoFileInput.click();
         });
       }
       
       if (logoFileInput) {
         logoFileInput.addEventListener('change', function(e) {
           const file = e.target.files[0];
           if (file) {
             // 验证文件类型
             if (!file.type.startsWith('image/')) {
               alert('请选择图片文件');
               return;
             }
             
             // 验证文件大小（2MB）
             if (file.size > 2 * 1024 * 1024) {
               alert('文件大小不能超过2MB');
               return;
             }
             
             // 预览图片
             const reader = new FileReader();
             reader.onload = function(e) {
               const imageUrl = e.target.result;
               logoPreview.innerHTML = `<img src="${imageUrl}" alt="Logo预览" class="w-full h-full object-contain rounded-lg">`;
               logoRemoveBtn.classList.remove('hidden');
               
               // 同步更新顶部导航栏的Logo
               document.getElementById('headerLogoImage').src = imageUrl;
               document.getElementById('headerLogo').classList.remove('hidden');
             };
             reader.readAsDataURL(file);
             
             // 模拟上传
             alert('Logo上传成功！');
           }
         });
       }
       
       if (logoRemoveBtn) {
         logoRemoveBtn.addEventListener('click', function() {
           // 重置预览区域
           logoPreview.innerHTML = `
             <div class="text-center">
               <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
               </svg>
               <p class="text-xs text-gray-500">Logo预览</p>
             </div>
           `;
           logoRemoveBtn.classList.add('hidden');
           logoFileInput.value = '';
           
           // 同步移除顶部导航栏的Logo
           document.getElementById('headerLogoImage').src = '';
           document.getElementById('headerLogo').classList.add('hidden');
           
           alert('Logo已移除');
         });
       }
       

       
       // 正式版专有按钮事件处理
       const expandRightsBtn = document.getElementById('expandRightsBtn');
       const renewLicenseServiceBtn = document.getElementById('renewLicenseServiceBtn');
       
       if (expandRightsBtn) {
         expandRightsBtn.addEventListener('click', function() {
           // 跳转到私有化服务登录页面
           window.location.href = 'private-login.html';
         });
       }
       
       if (renewLicenseServiceBtn) {
         renewLicenseServiceBtn.addEventListener('click', function() {
           // 跳转到私有化服务登录页面
           window.location.href = 'private-login.html';
         });
       }
       
       // 购买License授权按钮事件处理
       const purchaseLicenseBtn = document.getElementById('purchaseLicenseBtn');
       
       if (purchaseLicenseBtn) {
         purchaseLicenseBtn.addEventListener('click', function() {
           // 跳转到私有化服务登录页面
           window.location.href = 'private-login.html';
         });
       }
       
       // 聊天管理相关功能
       const ownIMConfigBtn = document.getElementById('ownIMConfigBtn');
       const ownIMConfigForm = document.getElementById('ownIMConfigForm');
       const ownIMCancelBtn = document.getElementById('ownIMCancelBtn');
       const ownIMForm = document.getElementById('ownIMForm');
       const ownIMConfigured = document.getElementById('ownIMConfigured');
       const ownIMEditBtn = document.getElementById('ownIMEditBtn');
       
       const platformIMConfigBtn = document.getElementById('platformIMConfigBtn');
       const platformIMConfigForm = document.getElementById('platformIMConfigForm');
       const platformIMCancelBtn = document.getElementById('platformIMCancelBtn');
       const platformIMForm = document.getElementById('platformIMForm');
       const platformIMConfigured = document.getElementById('platformIMConfigured');
       const platformIMEditBtn = document.getElementById('platformIMEditBtn');
       
       // 隐藏所有表单的函数
       function hideAllIMForms() {
         if (ownIMConfigForm) ownIMConfigForm.classList.add('hidden');
         if (platformIMConfigForm) platformIMConfigForm.classList.add('hidden');
       }
       
       // 我有 IM 服务通道 - 去配置按钮
       if (ownIMConfigBtn) {
         ownIMConfigBtn.addEventListener('click', function() {
           hideAllIMForms();
           ownIMConfigForm.classList.remove('hidden');
         });
       }
       
       // 我有 IM 服务通道 - 取消按钮
       if (ownIMCancelBtn) {
         ownIMCancelBtn.addEventListener('click', function() {
           ownIMConfigForm.classList.add('hidden');
           document.getElementById('ownIMAppId').value = '';
           document.getElementById('ownIMSecretKey').value = '';
         });
       }
       
       // 我有 IM 服务通道 - 表单提交
       if (ownIMForm) {
         ownIMForm.addEventListener('submit', function(e) {
           e.preventDefault();
           
           const appId = document.getElementById('ownIMAppId').value.trim();
           const secretKey = document.getElementById('ownIMSecretKey').value.trim();
           
           if (!appId || !secretKey) {
             alert('请填写所有必填字段');
             return;
           }
           
           // 保存配置并显示已配置状态
           document.getElementById('ownIMAppIdDisplay').textContent = appId;
           document.getElementById('ownIMSecretKeyDisplay').textContent = secretKey.substring(0, 8) + '***';
           
           // 隐藏配置选项，显示已配置状态
           document.getElementById('imConfigOptions').classList.add('hidden');
           document.getElementById('imConfiguredSection').classList.remove('hidden');
           document.getElementById('ownIMConfigured').classList.remove('hidden');
           
           alert('IM服务配置保存成功！');
         });
       }
       
       // 我有 IM 服务通道 - 重新配置按钮
       if (ownIMEditBtn) {
         ownIMEditBtn.addEventListener('click', function() {
           // 隐藏已配置状态，显示配置选项
           document.getElementById('imConfiguredSection').classList.add('hidden');
           document.getElementById('imConfigOptions').classList.remove('hidden');
           
           // 显示表单并恢复数据
           ownIMConfigForm.classList.remove('hidden');
           const currentAppId = document.getElementById('ownIMAppIdDisplay').textContent;
           document.getElementById('ownIMAppId').value = currentAppId;
         });
       }
       
       // 使用平台 IM 服务 - 去配置按钮
       if (platformIMConfigBtn) {
         platformIMConfigBtn.addEventListener('click', function() {
           hideAllIMForms();
           platformIMConfigForm.classList.remove('hidden');
         });
       }
       
       // 使用平台 IM 服务 - 取消按钮
       if (platformIMCancelBtn) {
         platformIMCancelBtn.addEventListener('click', function() {
           platformIMConfigForm.classList.add('hidden');
           document.getElementById('platformIMAppId').value = '';
           document.getElementById('platformIMSecretKey').value = '';
         });
       }
       
       // 使用平台 IM 服务 - 表单提交
       if (platformIMForm) {
         platformIMForm.addEventListener('submit', function(e) {
           e.preventDefault();
           
           const appId = document.getElementById('platformIMAppId').value.trim();
           const secretKey = document.getElementById('platformIMSecretKey').value.trim();
           
           if (!appId || !secretKey) {
             alert('请填写所有必填字段');
             return;
           }
           
           // 保存配置并显示已配置状态
           document.getElementById('platformIMAppIdDisplay').textContent = appId;
           document.getElementById('platformIMSecretKeyDisplay').textContent = secretKey.substring(0, 8) + '***';
           
           // 隐藏配置选项，显示已配置状态
           document.getElementById('imConfigOptions').classList.add('hidden');
           document.getElementById('imConfiguredSection').classList.remove('hidden');
           document.getElementById('platformIMConfigured').classList.remove('hidden');
           
           alert('IM服务配置保存成功！');
         });
       }
       
       // 使用平台 IM 服务 - 重新配置按钮
       if (platformIMEditBtn) {
         platformIMEditBtn.addEventListener('click', function() {
           // 隐藏已配置状态，显示配置选项
           document.getElementById('imConfiguredSection').classList.add('hidden');
           document.getElementById('imConfigOptions').classList.remove('hidden');
           
           // 显示表单并恢复数据
           platformIMConfigForm.classList.remove('hidden');
           const currentAppId = document.getElementById('platformIMAppIdDisplay').textContent;
           document.getElementById('platformIMAppId').value = currentAppId;
         });
       }
       
       // License费用页面 - 购买License按钮事件处理
       const buyLicenseBtn = document.getElementById('buyLicenseBtn');
       
       if (buyLicenseBtn) {
         buyLicenseBtn.addEventListener('click', function() {
           // 跳转到私有化服务登录页面
           window.location.href = 'private-login.html';
         });
       }
       
       // AI知识库相关功能
       initializeAIKnowledgeBase();
     });
     
     // AI知识库功能初始化
     function initializeAIKnowledgeBase() {
       // 模拟数据
       const mockKnowledgeBases = [
         {
           id: 1,
           name: '客服知识库',
           accounts: ['微信客服', '抖音官方'],
           docCount: 25,
           pointCount: 156,
           status: '已训练',
           createTime: '2024-01-15 10:30:00'
         },
         {
           id: 2,
           name: '产品介绍库',
           accounts: ['小红书营销', '微博推广'],
           docCount: 18,
           pointCount: 89,
           status: '训练中',
           createTime: '2024-01-20 14:20:00'
         },
         {
           id: 3,
           name: '售后服务库',
           accounts: ['微信客服'],
           docCount: 12,
           pointCount: 67,
           status: '待训练',
           createTime: '2024-01-25 09:15:00'
         }
       ];
       
       const mockDocuments = [
         {
           id: 1,
           name: '产品使用手册.pdf',
           knowledgeBase: '客服知识库',
           type: 'PDF',
           size: '2.5MB',
           status: '已提取',
           uploadTime: '2024-01-15 11:00:00'
         },
         {
           id: 2,
           name: '常见问题FAQ.docx',
           knowledgeBase: '客服知识库',
           type: 'Word',
           size: '1.2MB',
           status: '提取中',
           uploadTime: '2024-01-16 15:30:00'
         },
         {
           id: 3,
           name: '产品介绍PPT.pptx',
           knowledgeBase: '产品介绍库',
           type: 'PowerPoint',
           size: '8.7MB',
           status: '已提取',
           uploadTime: '2024-01-20 16:45:00'
         }
       ];
       
       const mockKnowledgePoints = [
         {
           id: 1,
           question: '如何退换货？',
           answer: '您可以在收到商品后7天内申请退换货，商品需保持原包装完整。请联系客服提供订单号和退换货原因。',
           knowledgeBase: '客服知识库',
           tags: ['退换货', '售后'],
           createTime: '2024-01-15 12:00:00'
         },
         {
           id: 2,
           question: '产品保修期多长？',
           answer: '我们的产品提供1年免费保修服务，保修期内非人为损坏可免费维修或更换。',
           knowledgeBase: '客服知识库',
           tags: ['保修', '售后'],
           createTime: '2024-01-15 12:30:00'
         },
         {
           id: 3,
           question: '支持哪些支付方式？',
           answer: '我们支持微信支付、支付宝、银行卡支付等多种支付方式，您可以选择最方便的方式进行支付。',
           knowledgeBase: '客服知识库',
           tags: ['支付', '购买'],
           createTime: '2024-01-16 09:15:00'
         }
       ];
       
       // 渲染知识库列表
       function renderKnowledgeBases() {
         const tbody = document.getElementById('knowledgeBaseTableBody');
         if (!tbody) return;
         
         tbody.innerHTML = mockKnowledgeBases.map(kb => `
           <tr>
             <td class="px-6 py-4 whitespace-nowrap">
               <div class="text-sm font-medium text-gray-900">${kb.name}</div>
             </td>
             <td class="px-6 py-4 whitespace-nowrap">
               <div class="flex flex-wrap gap-1">
                 ${kb.accounts.map(account => `
                   <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                     ${account}
                   </span>
                 `).join('')}
               </div>
             </td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${kb.docCount}</td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${kb.pointCount}</td>
             <td class="px-6 py-4 whitespace-nowrap">
               <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusClass(kb.status)}">
                 ${kb.status}
               </span>
             </td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${kb.createTime}</td>
             <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
               <button class="text-blue-600 hover:text-blue-900 mr-3">编辑</button>
               <button class="text-red-600 hover:text-red-900">删除</button>
             </td>
           </tr>
         `).join('');
       }
       
       // 渲染文档列表
       function renderDocuments() {
         const tbody = document.getElementById('documentTableBody');
         if (!tbody) return;
         
         tbody.innerHTML = mockDocuments.map(doc => `
           <tr>
             <td class="px-6 py-4 whitespace-nowrap">
               <input type="checkbox" class="rounded border-gray-300">
             </td>
             <td class="px-6 py-4 whitespace-nowrap">
               <div class="flex items-center">
                 <svg class="w-5 h-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                 </svg>
                 <div class="text-sm font-medium text-gray-900">${doc.name}</div>
               </div>
             </td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${doc.knowledgeBase}</td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${doc.type}</td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${doc.size}</td>
             <td class="px-6 py-4 whitespace-nowrap">
               <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusClass(doc.status)}">
                 ${doc.status}
               </span>
             </td>
             <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${doc.uploadTime}</td>
             <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
               <button class="text-blue-600 hover:text-blue-900 mr-3">查看</button>
               <button class="text-red-600 hover:text-red-900">删除</button>
             </td>
           </tr>
         `).join('');
       }
       
       // 渲染知识点列表
       function renderKnowledgePoints() {
         const container = document.getElementById('knowledgePointsList');
         if (!container) return;
         
         container.innerHTML = mockKnowledgePoints.map(point => `
           <div class="bg-white rounded-lg shadow p-6">
             <div class="flex items-start justify-between mb-4">
               <div class="flex-1">
                 <h4 class="text-lg font-medium text-gray-900 mb-2">${point.question}</h4>
                 <p class="text-gray-600 mb-3">${point.answer}</p>
                 <div class="flex items-center space-x-4 text-sm text-gray-500">
                   <span>知识库：${point.knowledgeBase}</span>
                   <span>创建时间：${point.createTime}</span>
                 </div>
               </div>
               <div class="flex items-center space-x-2 ml-4">
                 <button class="text-blue-600 hover:text-blue-900 text-sm">编辑</button>
                 <button class="text-red-600 hover:text-red-900 text-sm">删除</button>
               </div>
             </div>
             <div class="flex flex-wrap gap-2">
               ${point.tags.map(tag => `
                 <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                   ${tag}
                 </span>
               `).join('')}
             </div>
           </div>
         `).join('');
       }
       
       // 获取状态样式类
       function getStatusClass(status) {
         switch (status) {
           case '已训练':
           case '已提取':
             return 'bg-green-100 text-green-800';
           case '训练中':
           case '提取中':
             return 'bg-yellow-100 text-yellow-800';
           case '待训练':
             return 'bg-gray-100 text-gray-800';
           default:
             return 'bg-gray-100 text-gray-800';
         }
       }
       
       // 初始化渲染
       renderKnowledgeBases();
       renderDocuments();
       renderKnowledgePoints();
       
       // 按钮事件处理
       const createKnowledgeBaseBtn = document.getElementById('createKnowledgeBaseBtn');
       const uploadDocumentBtn = document.getElementById('uploadDocumentBtn');
       const addKnowledgePointBtn = document.getElementById('addKnowledgePointBtn');
       const extractFromDocBtn = document.getElementById('extractFromDocBtn');
       const startTrainingBtn = document.getElementById('startTrainingBtn');
       const testAnswerBtn = document.getElementById('testAnswerBtn');
       
       if (createKnowledgeBaseBtn) {
         createKnowledgeBaseBtn.addEventListener('click', function() {
           alert('创建知识库功能开发中...');
         });
       }
       
       if (uploadDocumentBtn) {
         uploadDocumentBtn.addEventListener('click', function() {
           alert('上传文档功能开发中...');
         });
       }
       
       if (addKnowledgePointBtn) {
         addKnowledgePointBtn.addEventListener('click', function() {
           alert('添加知识点功能开发中...');
         });
       }
       
       if (extractFromDocBtn) {
         extractFromDocBtn.addEventListener('click', function() {
           alert('从文档提取知识点功能开发中...');
         });
       }
       
       if (startTrainingBtn) {
         startTrainingBtn.addEventListener('click', function() {
           const progressDiv = document.getElementById('trainingProgress');
           const progressBar = document.getElementById('progressBar');
           const progressPercent = document.getElementById('progressPercent');
           
           progressDiv.classList.remove('hidden');
           
           // 模拟训练进度
           let progress = 0;
           const interval = setInterval(() => {
             progress += Math.random() * 10;
             if (progress >= 100) {
               progress = 100;
               clearInterval(interval);
               alert('模型训练完成！');
             }
             
             progressBar.style.width = progress + '%';
             progressPercent.textContent = Math.round(progress) + '%';
           }, 500);
         });
       }
       
       if (testAnswerBtn) {
         testAnswerBtn.addEventListener('click', function() {
           const question = document.getElementById('testQuestion').value.trim();
           if (!question) {
             alert('请输入测试问题');
             return;
           }
           
           const resultDiv = document.getElementById('aiAnswerResult');
           const contentDiv = document.getElementById('aiAnswerContent');
           
           // 模拟AI回答
           const mockAnswers = [
             '根据我们的知识库，这个问题的答案是...',
             '很抱歉，我在知识库中没有找到相关信息，建议您联系人工客服。',
             '基于现有资料，我可以为您提供以下信息...'
           ];
           
           const randomAnswer = mockAnswers[Math.floor(Math.random() * mockAnswers.length)];
           contentDiv.textContent = randomAnswer;
           resultDiv.classList.remove('hidden');
         });
       }
     }
   </script>
</body>
</html> 